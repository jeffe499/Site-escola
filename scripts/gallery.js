(function(){function qs(s){return document.querySelector(s)}function qsa(s){return Array.from(document.querySelectorAll(s))}function parseEmbedded(id,fallback){try{var el=document.getElementById(id);if(!el)return fallback;var txt=el.textContent.trim();return txt?JSON.parse(txt):fallback}catch(e){return fallback}}Array.from(document.querySelectorAll('.gallery-grid img')).forEach(function(img){img.addEventListener('click',function(){var src=this.getAttribute('data-full')||this.src;window.siteAPI.openModal('<img src="'+src+'" alt="Galeria" style="max-width:100%;height:auto;border-radius:8px">')})});var embeddedTeachers=parseEmbedded('embedded-teachers',[]);fetch('data/teachers.json',{cache:'no-store'}).then(function(r){if(!r.ok)throw 1;return r.json()}).catch(function(){return embeddedTeachers}).then(function(teachers){var el=document.getElementById('teachers-list'); if(!el) return; if(!teachers||teachers.length===0){el.innerHTML='<p class="muted">Nenhum professor cadastrado.</p>';return}el.innerHTML=teachers.map(function(t,idx){return '<article class="card news-item"><strong>'+escapeHtml(t.name)+'</strong><small>'+escapeHtml(t.subject)+'</small><p>'+escapeHtml(t.bio||'')+'</p><p><button class="btn small" data-idx="'+idx+'">Ver perfil</button></p></article>'}).join('');Array.from(document.querySelectorAll('#teachers-list .btn')).forEach(function(b){b.addEventListener('click',function(){var idx=Number(this.getAttribute('data-idx'));var t=teachers[idx];if(!t)return;window.siteAPI.openModal('<h3>'+escapeHtml(t.name)+'</h3><p><strong>Disciplina:</strong> '+escapeHtml(t.subject)+'</p><p>'+escapeHtml(t.bio||'')+'</p><p><a href="mailto:'+escapeHtml(t.email||'')+'">Enviar e-mail</a></p>')})})});function escapeHtml(s){if(!s)return'';return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}})();